<div class="plans" role="region" aria-label="Subscription plans">
  <div class="title"><h2>SUBSCRIPTION PLANS</h2></div>
  <div class="stage">
    <div #track class="track" aria-live="off">
      @for (plan of clonedPlans; track $index) {
        <article #cardEl class="card" 
                 [class.featured]="$index % plans.length === (plans.length === 4 ? 2 : 1)"
                 [class.highlighted]="highlightedIndex() === $index % plans.length"
                 [class.dimmed]="highlightedIndex() !== -1 && highlightedIndex() !== $index % plans.length"
                 (mouseenter)="onCardHover($index)"
                 (mouseleave)="onCardLeave()">
          <div class="card-glow"></div>
          <header>
            <div>
              <h4>{{ plan.title }}</h4>
              <p class="desc">{{ plan.description }}</p>
            </div>
            <span class="leaf" [class.big]="$index % plans.length === (plans.length === 4 ? 2 : 1)"></span>
          </header>
          <div class="divider"></div>
          <ul class="bullets">
            <li>Duration <span class="chip">{{ plan.durationLabel }}</span></li>
            <li>Allows Installments <span class="chip">{{ plan.allowsInstallments }}</span></li>
            <li>Allowance <span class="chip">{{ plan.allowanceLabel }}</span></li>
            <li>Savings <span class="chip" [class.fire]="$index % plans.length === 1">{{ plan.savingsLabel }}</span></li>
          </ul>
          <div class="select" [class.pill]="$index % plans.length === 1" role="button" tabindex="0" (click)="onSelect(plan)" (keydown.enter)="onSelect(plan)">Select Product <span>â–¾</span></div>
        </article>
      }
    </div>
  </div>
</div>
